# Домашнее задание по теме "Веб-скрапинг"

## Введение

Вы выбираете себе новый ноутбук для покупки. Вы овладели навыками работы с инструментами веб-скрапинга и вам не терпится их применить для решения этой задачи. Вы решаете собрать и сравнить ноутбуки с разных сайтов и выбрать из них лучший по вашему мнению. Вы решаете хранить собранные данные в таблице и автоматически выставлять к записям рейтинг "привлекательности для покупки"

## Требования

- Напишите скрапер собирающий информацию с сайтов на ваш выбор
- должно быть не менее **500 записей** о технике
- должны быть данные с **не менее чем 2 сайтов**
- должно быть складывание **в базу**
- дожно быть автоматическое **вычисление рейтинга** сразу
- напишите **readme.md** с кратким описанием инструкцией запуска
- используйте **requirements.txt** для указания сторонних зависимостей и их версий

## Реализация

### Используемые модули, структура

Для сбора данных выбраны два сайта [Notik](https://www.notik.ru/) и [Citilink](https://www.citilink.ru/).

Используются:

- Интерпретатор [Python v 3.10](https://www.python.org/).
- [Selenium 4](https://www.selenium.dev/) для автоматизации действий веб-браузера.
- [Webdriver-manager](https://pypi.org/project/webdriver-manager/) для автоматической загрузки актуальных веб-драйверов.
- База данных [SQLite-python](https://docs.python.org/3/library/sqlite3.html) для записи найденых данных.

Структура таблицы:

```SQL
CREATE TABLE <имя_таблицы> (  
    id INTEGER PRIMARY KEY AUTOINCREMENT,  
    url TEXT, -- ссылка на страницу товара  
    visited_at timestamp,  -- время посещения страницы  
    name TEXT,  -- наименование товара  
    cpu_hhz REAL,  -- частота процессора, ГГЦ  
    ram_gb INTEGER,  -- объем ОЗУ, Гб  
    ssd_gb INTEGER,  -- Объем SSD, Гб  
    price_rub INTEGER,  -- Цена, руб  
    rank REAL  -- вычисляемый рейтинг  
);
```

### Конфигурация, запуск

Конфигурация находится в файле [main.py](main.py) в секции ***# Параметры*** (указаны значения используемые по умолчанию):

```python
# Параметры
browser = ('chrome', 'firefox', 'edge')[0]  # Выбор браузера
headless = True  # Не показывать окно браузера
max_items = 600  # Максимальное количество записей
new_data = True  # Заново собрать данные с сайтов
ranks = (  # Рейтинг параметров
    ('cpu_hhz', 2),
    ('ram_gb', 5),
    ('ssd_gb', 0.1),
    ('price_rub', -0.001)
)
new_rank = False  # Пересчитать рейтинг
top = 5  # Количество лучших по рейтингу для вывода
```

Запуск - скрипт [main.py](main.py).

### Работа

При указанных параметрах запустится сбор данных с сайтов без открытия окна браузера. Ход работы отображается в консоли.

Собраны будут 600 записей. После завершения сбора, выведется информация о ТОП 5 лучших вариантов по рейтингу.

Вариант вывода (в примере длинные записи обрезаны):

```text
Имя: MSI Stealth GS77 12UHS-030RU i9-12900H 64Gb ...
Процессор: 2.5 ГГц; Память: 64 ГБ; Диск: 2048 ГБ
Рейтинг: 190; Цена: 338900 р.; Дата: 2023-01-13 21:59:13
Ссылка: https://www.notik.ru/goods/notebooks-msi- ...
```

### Описание некоторых настроек

`browser = ('chrome', 'firefox', 'edge')[0]` - в квадратных скобках указывается индекс используемого браузера:

- 0 - Chrome
- 1 - Firefox
- 2 - MS Edge

---

`new_data` - собирать или нет новые данные с сайтов:

- `True` - очистить базу, собирать **все записи заново** и вывести ТОП. Рейтинг посчитается при сборе. Настройка `new_rank` **не влияет** на расчет рейтинга.
- `False` - **не собирать** записи и вывести ТОП.

---

`new_rank` - пересчитать рейтинк или нет:

- `True` - персчитает рейтинг в базе данных.  Пересчет будет проведен при условии что `new_data = False`.
- `False` - не персчитывать рейтинг.

---

`ranks` - список весов для параметров:

- `cpu_hhz` - вес частоты процессора
- `ram_gb` - вес объема памяти
- `ssd_gb` - вес емкости диска
- `price_rub` - вес цены

Пример записи весов:

```python
ranks = (
    ('cpu_hhz', 2),
    ('ram_gb', 5),
    ('ssd_gb', 0.1),
    ('price_rub', -0.001)
)
```

### Особенности

Данные по умолчанию собираются в файл базы данных [nout.db](nout.db).

В проекте есть два файла [nout.db](nout.db) и [nout_old.db](nout_old.db). В них уже есть собраная информация о 600 ноутбуках с сайтов. Если при запуске программы указана насторйка `new_data = False`, то будут использоваться данные из файла [nout.db](nout.db).
